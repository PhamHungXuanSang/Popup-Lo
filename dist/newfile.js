(()=>{"use strict";const e={closeAfterXSeconds:(e,t)=>{if(1==e.enable){const o=document.querySelector(`.${t}`).querySelector(".closeAfterXSeconds");new MutationObserver((t=>{let n;t.forEach((t=>{"attributes"===t.type&&"class"===t.attributeName&&(o.classList.contains("active")?n=setTimeout((()=>{o.classList.remove("active"),o.style.setProperty("display","none")}),e.seconds):clearTimeout(n))}))})).observe(o,{attributes:!0})}},closeClickButton:(e,t)=>{if(!0===e.enable){const e=document.querySelector(`.${t}`);e.querySelector(".btnClosePopup").onclick=()=>{e.querySelector(".closeClickButton").classList.remove("active")}}},closeClickOutside:(e,t)=>{if(1==e.enable){function o(e){e.stopPropagation();let t=e.target.parentElement;for(;t!==document.body;){if(t.classList.contains("closeClickOutside")||t.classList.contains("activePopup"))return t;t=t.parentElement}return null}document.querySelectorAll(".closeClickOutside").forEach(((e,t)=>{document.addEventListener("click",(n=>{if(e.classList.contains("active")&&n.target!=document.querySelector(".btnpopupTest"+(t+1))){if(1==o(n))return;null==o(n)&&e.classList.remove("active")}}))}))}}},t=class{constructor(e){this.config=e}readConfig(e,t,o,n){var i=!1;return t.forEach((t=>{void 0!==e[t]&&1==o[t](e[t],n)&&(i=!0)})),i}},o=class{constructor(e,t){this.options=e,this.keyPopup=t,this.init()}init(){(new t).readConfig(this.options,["closeAfterXSeconds","closeClickButton","closeClickOutside"],e,this.keyPopup)}},n={scrollToXPercent:(e,t)=>{if(!e.enable)return!1;window.addEventListener("scroll",(function(){const o=window.scrollY;console.log("Giá trị đã cuộn: "+o);const n=document.body.scrollHeight-window.innerHeight;console.log("Chiều cao page: "+n);let i=sessionStorage.getItem(t);console.log(e.percent/100*n),o>=e.percent/100*n&&null===i&&(document.querySelector(`.${t}`).querySelector(".scrollToXPercent").classList.add("active"),sessionStorage.setItem(t,1))}))},visitWebAfterXSeconds:(e,t)=>{if(1==e.enable){const o=document.querySelector(`.${t}`).querySelector(".visitWebAfterXSeconds");setTimeout((()=>{o.classList.add("active")}),e.seconds)}},onClickItem:(e,t)=>{console.log(t),1==e.enable&&(document.querySelector(`.btn${t}`).onclick=()=>{document.querySelector(`.${t}`).querySelector(".onClickItem").classList.add("active")})},afterViewXPage:(e,t)=>{if(1==e.enable){var o=localStorage.getItem(`${t}`);null==o&&(o=0),o++,localStorage.setItem(`${t}`,o),o===e.NumPage&&document.querySelector(`.${t}`).querySelector(".afterViewXPage").classList.add("active")}}},i=class{constructor(e,t){this.options=e,this.keyPopup=t,this.init()}init(){this.isOpenPopup()}isOpenPopup(){return(new t).readConfig(this.options,["scrollToXPercent","visitWebAfterXSeconds","onClickItem","afterViewXPage"],n,this.keyPopup)}},s=class{constructor(e,t){this.optionOpen=e.open,this.optionClose=e.close,this.keyPopup=t,this.init()}init(){new i(this.optionOpen,this.keyPopup),new o(this.optionClose,this.keyPopup)}},a={existClass:e=>!0===e.enable&&document.body.classList.contains("saas-popup"),existCookie:e=>{if(!0===e.enable){return 1==(e=>{let t=e+"=",o=decodeURIComponent(document.cookie).split(";"),n=o.length;for(let e=0;e<n;e++){let n=o[e];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return n.substring(t.length,n.length)}return""})("saas-popup")}return!1}},r=class{constructor(e){this.options=e,this.init()}init(){(new t).readConfig(this.options,["existClass","existCookie"],a)}getStatus(){return(new t).readConfig(this.options,["existClass","existCookie"],a)}},c={positionPopup:(e,t)=>{if(console.log(e),null!=e.width&&null!=e.height){var o=document.documentElement.clientWidth,n=document.documentElement.clientHeight,i=e.width,s=e.height;o<=360?(i*=.4,s*=.4):o<=480?(i*=.5,s*=.5):o<=640?(i*=.7,s*=.7):o<=768&&(i*=.8,s*=.8);var a=(o-i)/o*100,r=(n-s)/n*100,c=o*(e.x/100)*(a/100),l=n*(e.y/100)*(r/100);let u=document.querySelector(`.${t}`).querySelector(".positionPopup");console.log(u),u.style.setProperty("width",`${i}px`,"important"),u.style.setProperty("height",`${s}px`,"important"),u.style.setProperty("left",`${c}px`,"important"),u.style.setProperty("top",`${l}px`,"important")}},overlayPopup:function(e,t){if(console.log(e),!0===e.enable){let e=!1;const o=document.querySelector(`.${t}`).querySelector(".overlayPopup");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName)if(o.classList.contains("active")&&!1===e){let t=document.createElement("div");t.classList.add("overlay"),document.querySelector("body").appendChild(t),e=!0}else if(!o.classList.contains("active")){let t=document.querySelector(".overlay");t&&document.querySelector("body").removeChild(t),e=!1}}))})).observe(o,{attributes:!0})}}},l=class{constructor(e,t){this.options=e,this.keyPopup=t,this.init()}init(){(new t).readConfig(this.options,["overlayPopup","positionPopup"],c,this.keyPopup)}},u={moveFromTop:(e,t)=>{if(!0===e.enable){const o=e.easing,n=window.innerHeight*(e.movingLength/100),i=document.querySelector(`.${t}`).querySelector(".moveFromTop");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&i.classList.contains("active")){const t=[{transform:`translateY(-${n}px)`,opacity:0},{transform:"translateY(0px)",opacity:1}],s={duration:e.duration,iterations:1,easing:o};i.animate(t,s)}}))})).observe(i,{attributes:!0})}},horizontalMove:(e,t)=>{if(!0===e.enable){const o=e.easing,n=window.innerWidth,i="left"==e.movingFrom.toLowerCase()?-n*(e.movingLength/100):n*(e.movingLength/100),s=document.querySelector(`.${t}`).querySelector(".horizontalMove");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&s.classList.contains("active")){const t=[{transform:`translateX(${i}px)`,opacity:0},{transform:"translateX(0px)",opacity:1}],n={duration:e.duration,iterations:1,easing:o};s.animate(t,n)}}))})).observe(s,{attributes:!0})}},zoomIn:(e,t)=>{if(!0===e.enable){const o=e.easing,n=document.querySelector(`.${t}`).querySelector(".zoomIn");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&n.classList.contains("active")){const t=[{transform:`scale(${e.fromPercent/100})`,opacity:0},{transform:"scale(1)",opacity:1}],i={duration:e.duration,iterations:1,easing:o};n.animate(t,i)}}))})).observe(n,{attributes:!0})}},fadeIn:(e,t)=>{if(1==e.enable){const o=e.easing,n=document.querySelector(`.${t}`).querySelector(".fadeIn");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&n.classList.contains("active")){const t=[{opacity:0},{opacity:1}],i={duration:e.duration,iterations:1,easing:o};n.animate(t,i)}}))})).observe(n,{attributes:!0})}}},p=class{constructor(e,t){this.options=e,this.keyPopup=t,this.init()}isEnableAnimations(){return this.options.enableAnimation}init(){this.isEnableAnimations()&&this.isOpenPopup()}isOpenPopup(){return(new t).readConfig(this.options,["moveFromTop","horizontalMove","zoomIn","fadeIn"],u,this.keyPopup)}},d={zoomOut:(e,t)=>{if(!0===e.enable){const o=e.easing,n=document.querySelector(`.${t}`).querySelector(".zoomOut");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&!n.classList.contains("active")){async function i(){1==await new Promise((t=>{const i={duration:e.duration,iterations:1,easing:o};n.animate([{transform:"scale(1)"},{transform:"scale(0)"}],i).onfinish=()=>{t(!0)}}))&&n.style.setProperty("display","none")}n.style.setProperty("display","block","important"),i()}}))})).observe(n,{attributes:!0})}},fadeOut:(e,t)=>{if(!0===e.enable){const o=e.easing,n=document.querySelector(`.${t}`).querySelector(".fadeOut");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&!n.classList.contains("active")){async function i(){1==await new Promise((t=>{const i={duration:e.duration,iterations:1,easing:o};n.animate([{opacity:1},{opacity:0}],i).onfinish=()=>{t(!0)}}))&&n.style.setProperty("display","none")}n.style.setProperty("display","block","important"),i()}}))})).observe(n,{attributes:!0})}},moveToTop:(e,t)=>{if(!0===e.enable){const o=e.easing,n=window.innerHeight*(e.movingLength/100),i=document.querySelector(`.${t}`).querySelector(".moveToTop");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&!i.classList.contains("active")){async function s(){1==await new Promise((t=>{const s=[{transform:"translateY(0px)",opacity:1},{transform:`translateY(-${n}px)`,opacity:0}],a={duration:e.duration,iterations:1,easing:o};i.animate(s,a).onfinish=()=>{t(!0)}}))&&i.style.setProperty("display","none")}i.style.setProperty("display","block","important"),s()}}))})).observe(i,{attributes:!0})}},horizontalMove:(e,t)=>{if(!0===e.enable){const o=e.easing,n=window.innerWidth,i="left"==e.movingTo.toLowerCase()?-n*(e.movingLength/100):n*(e.movingLength/100),s=document.querySelector(`.${t}`).querySelector(".horizontalMove");new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"class"===t.attributeName&&!s.classList.contains("active")){async function n(){1==await new Promise((t=>{const n=[{transform:"translateX(0px)",opacity:1},{transform:`translateX(${i}px)`,opacity:0}],a={duration:e.duration,iterations:1,easing:o};s.animate(n,a).onfinish=()=>{t(!0)}}))&&s.style.setProperty("display","none")}s.style.setProperty("display","block","important"),n()}}))})).observe(s,{attributes:!0})}}},m=class{constructor(e,t){this.options=e,this.keyPopup=t,this.init()}isDisnableAnimations(){return this.options.enableAnimation}init(){this.isDisnableAnimations()&&this.isClosePopup()}isClosePopup(){(new t).readConfig(this.options,["zoomOut","fadeOut","moveToTop","horizontalMove"],d,this.keyPopup)}},h=class{constructor(e,t){this.optionAppear=e.appear,this.optionDisAppear=e.disappear,this.keyPopup=t,this.init()}init(){new p(this.optionAppear,this.keyPopup),new m(this.optionDisAppear,this.keyPopup)}},b=class{constructor(e,t,o,n){this.className=e,this.html=t,this.idPopup=o,this.classList=n}innerPopup(e){const t=document.createElement("div");t.style.setProperty("display","none");for(let e of this.classList)t.classList.add(e);t.innerHTML=this.html,t.style.setProperty("position","fixed","important"),document.querySelector(`.${this.idPopup}`).appendChild(t)}},y=class{constructor(e,t){this.config=e,this.keyPopup=t}addStyleCSS(){document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("head"),t=document.createElement("link");t.rel="stylesheet",t.href="https://phamhungxuansang.github.io/Popup-Lo/src/core/core.css",e.appendChild(t)}))}findKeysWithEnableTrue(e){const t=[];for(const o in e)if("object"==typeof e[o]){const n=this.findKeysWithEnableTrue(e[o]);n.length>0&&t.push(...n.map((e=>`${o}.${e}`)))}else"enable"===o&&!0===e[o]&&t.push(o);return t}splitStringToArray(e){return e.split(".")}filterEnabledElements(e){return e.filter((e=>"enable"!==e))}functionPopupEnabled=()=>{const e=this.findKeysWithEnableTrue(this.config);var t=["positionPopup"];return e.forEach((e=>{let o=this.filterEnabledElements(this.splitStringToArray(e)),n=o.length;n>0&&t.push(o[n-1])})),t};show(){new b("my-popup",'\n<div class="popup">\n<div class="img-wrapper"><img src="https://png.pngtree.com/thumb_back/fw800/background/20221116/pngtree-isolated-white-background-with-a-vertical-red-gift-bow-photo-image_677817.jpg" alt="Anh"></div>\n<div class="content">\n    <p class="popup-heading">Save up to</p>\n    <h1 class="popup-offer">30% OFF</h1>\n    <p class="popup-desc">In your next holiday offer</p>\n\n    <form action="POST" class="popup-form">\n        <input class="email" type="email" placeholder="Please enter your email">\n        <input class="submit" type="button" value="Get it now">\n    </form>\n\n    <button class="refuse btnClosePopup">No, thanks</button>\n</div>\n</div>\n',this.keyPopup,this.functionPopupEnabled()).innerPopup();const e=new r(this.config.condition);e.getStatus(),!1!==e.getStatus()?!0===e.getStatus()&&!0===this.config.enable&&(new h(this.config.animations,this.keyPopup),new s(this.config.behaviors,this.keyPopup),new l(this.config.design,this.keyPopup)):console.log("Ngung")}};[{enable:!0,functionName:"popupTest1",namePopup:"Test-saas-popup",condition:{existClass:{enable:!0},existCookie:{enable:!1}},behaviors:{open:{scrollToXPercent:{enable:!0,percent:50},visitWebAfterXSeconds:{enable:!1,seconds:3e3},onClickItem:{enable:!1},afterViewXPage:{enable:!1,NumPage:3}},close:{closeAfterXSeconds:{enable:!1,seconds:3e3},closeClickButton:{enable:!0},closeClickOutside:{enable:!0}}},design:{positionPopup:{width:500,height:400,x:50,y:50},overlayPopup:{enable:!0}},animations:{appear:{enableAnimation:!0,moveFromTop:{enable:!1,duration:400,easing:"ease-in",movingLength:100},horizontalMove:{enable:!1,duration:400,easing:"ease-in",movingFrom:"right",movingLength:10},zoomIn:{enable:!0,duration:300,easing:"linear",fromPercent:80},fadeIn:{enable:!1,duration:300,easing:"ease-in"}},disappear:{enableAnimation:!0,zoomOut:{enable:!1,duration:200,easing:"ease-out"},fadeOut:{enable:!0,duration:500,easing:"ease-out"},moveToTop:{enable:!1,duration:300,easing:"ease-out",movingLength:50},horizontalMove:{enable:!1,duration:400,easing:"ease-out",movingTo:"right",movingLength:20}}}},{enable:!0,functionName:"popupTest2",namePopup:"Test-saas-popup",condition:{existClass:{enable:!0},existCookie:{enable:!1}},behaviors:{open:{scrollToXPercent:{enable:!1,percent:50},visitWebAfterXSeconds:{enable:!1,seconds:3e3},onClickItem:{enable:!0},afterViewXPage:{enable:!1,NumPage:3}},close:{closeAfterXSeconds:{enable:!1,seconds:3e3},closeClickButton:{enable:!0},closeClickOutside:{enable:!0}}},design:{positionPopup:{width:300,height:400,x:100,y:50},overlayPopup:{enable:!0}},animations:{appear:{enableAnimation:!0,moveFromTop:{enable:!1,duration:400,easing:"ease-in",movingLength:100},horizontalMove:{enable:!1,duration:400,easing:"ease-in",movingFrom:"right",movingLength:10},zoomIn:{enable:!0,duration:300,easing:"linear",fromPercent:80},fadeIn:{enable:!1,duration:300,easing:"ease-in"}},disappear:{enableAnimation:!0,zoomOut:{enable:!1,duration:200,easing:"ease-out"},fadeOut:{enable:!0,duration:500,easing:"ease-out"},moveToTop:{enable:!1,duration:300,easing:"ease-out",movingLength:50},horizontalMove:{enable:!1,duration:400,easing:"ease-out",movingTo:"right",movingLength:20}}}}].forEach((e=>{if(1==e.enable){const t=document.createElement("div");t.classList.add("my-popup",e.functionName),document.body.appendChild(t);let o=new y(e,e.functionName);o.addStyleCSS(),o.show()}}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQixFQUNqQnBCLFlBQWEsQ0FDVHBILFFBQVEsRUFDUjJILFNBQVUsSUFDVk4sT0FBUSxVQUNSQyxhQUFjLEtBRWxCUSxlQUFnQixDQUNaOUgsUUFBUSxFQUNSMkgsU0FBVSxJQUNWTixPQUFRLFVBQ1JZLFdBQVksUUFDWlgsYUFBYyxJQUVsQmEsT0FBUSxDQUNKbkksUUFBUSxFQUNSMkgsU0FBVSxJQUNWTixPQUFRLFNBQ1JnQixZQUFhLElBRWpCQyxPQUFRLENBQ0p0SSxRQUFRLEVBQ1IySCxTQUFVLElBQ1ZOLE9BQVEsWUFHaEJrQyxVQUFXLENBQ1BmLGlCQUFpQixFQUNqQkMsUUFBUyxDQUNMekksUUFBUSxFQUNSMkgsU0FBVSxJQUNWTixPQUFRLFlBRVowQixRQUFTLENBQ0wvSSxRQUFRLEVBQ1IySCxTQUFVLElBQ1ZOLE9BQVEsWUFFWjJCLFVBQVcsQ0FDUGhKLFFBQVEsRUFDUjJILFNBQVUsSUFDVk4sT0FBUSxXQUNSQyxhQUFjLElBRWxCUSxlQUFnQixDQUNaOUgsUUFBUSxFQUNSMkgsU0FBVSxJQUNWTixPQUFRLFdBQ1I0QixTQUFVLFFBQ1YzQixhQUFjLFFBck9mL0csU0FBUzBCLElBQ2hCLEdBQXNCLEdBQWxCQSxFQUFRakMsT0FBZ0IsQ0FDeEIsTUFBTTZMLEVBQUszTCxTQUFTK0csY0FBYyxPQUNsQzRFLEVBQUdsTCxVQUFVa0QsSUFBSSxXQUFZNUIsRUFBUTBKLGNBQ3JDekwsU0FBUzZCLEtBQUttRixZQUFZMkUsR0FFMUIsSUFBSUMsRUFBVyxJQUFJLEVBQU03SixFQUFTQSxFQUFRMEosY0FDMUNHLEVBQVMvQixjQUNUK0IsRUFBU1YsTUFDYixJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYmVoYXZpb3JzL2Nsb3NlL29wdGlvbnMvY2xvc2VBZnRlclhTZWNvbmRzLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2JlaGF2aW9ycy9jbG9zZS9yZWdpc3Rlci5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9iZWhhdmlvcnMvY2xvc2Uvb3B0aW9ucy9jbG9zZUNsaWNrQnV0dG9uLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2JlaGF2aW9ycy9jbG9zZS9vcHRpb25zL2Nsb3NlQ2xpY2tPdXRzaWRlLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9jb3JlL2NvcmUuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYmVoYXZpb3JzL2Nsb3NlL2Nsb3NlLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2JlaGF2aW9ycy9vcGVuL3JlZ2lzdGVyLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2JlaGF2aW9ycy9vcGVuL29wdGlvbnMvc2Nyb2xsVG9YUGVyY2VudC5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9iZWhhdmlvcnMvb3Blbi9vcHRpb25zL3Zpc2l0V2ViQWZ0ZXJYU2Vjb25kcy5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9iZWhhdmlvcnMvb3Blbi9vcHRpb25zL29uQ2xpY2tJdGVtLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2JlaGF2aW9ycy9vcGVuL29wdGlvbnMvYWZ0ZXJWaWV3WFBhZ2UuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYmVoYXZpb3JzL29wZW4vb3Blbi5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9iZWhhdmlvcnMvYmVoYXZpb3JzLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2NvbmRpdGlvbnMvcmVnaXN0ZXIuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvY29uZGl0aW9ucy9vcHRpb25zL2V4aXN0Q2xhc3MuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvY29uZGl0aW9ucy9vcHRpb25zL2V4aXN0Q29va2llLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2NvbmRpdGlvbnMvY29uZGl0aW9uLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2Rlc2lnbnMvcmVnaXN0ZXIuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvZGVzaWducy9jb21wb25lbnRzL3Bvc2l0aW9uLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2Rlc2lnbnMvY29tcG9uZW50cy9vdmVybGF5LmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2Rlc2lnbnMvZGVzaWduLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2FuaW1hdGlvbnMvYXBwZWFyL3JlZ2lzdGVyLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2FuaW1hdGlvbnMvYXBwZWFyL29wdGlvbnMvbW92ZUZyb21Ub3AuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYW5pbWF0aW9ucy9hcHBlYXIvb3B0aW9ucy9ob3Jpem9udGFsTW92ZS5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2FwcGVhci9vcHRpb25zL3pvb21Jbi5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2FwcGVhci9vcHRpb25zL2ZhZGVJbi5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2FwcGVhci9hcHBlYXIuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYW5pbWF0aW9ucy9kaXNhcHBlYXIvcmVnaXN0ZXIuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL21vZHVsZXMvYW5pbWF0aW9ucy9kaXNhcHBlYXIvb3B0aW9ucy96b29tT3V0LmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2FuaW1hdGlvbnMvZGlzYXBwZWFyL29wdGlvbnMvZmFkZU91dC5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2Rpc2FwcGVhci9vcHRpb25zL21vdmVUb1RvcC5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2Rpc2FwcGVhci9vcHRpb25zL2hvcml6b250YWxNb3ZlLmpzIiwid2VicGFjazovL1dlYnBhY2stcHJvamVjdC8uL3NyYy9tb2R1bGVzL2FuaW1hdGlvbnMvZGlzYXBwZWFyL2Rpc2FwcGVhci5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvbW9kdWxlcy9hbmltYXRpb25zL2FuaW1hdGlvbi5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvY29yZS9yZW5kZXIuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvcmUvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vV2VicGFjay1wcm9qZWN0Ly4vc3JjL2NvcmUvZXhhbS5qcyIsIndlYnBhY2s6Ly9XZWJwYWNrLXByb2plY3QvLi9zcmMvY29yZS9hcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBjbG9zZUFmdGVyWFNlY29uZHMgPSAoY29uZmlnLCBrZXlQb3B1cCkgPT4ge1xyXG4gICAgaWYoY29uZmlnLmVuYWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZWtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudENsb3NlUG9wdXA9IGVrZXlQb3B1cC5xdWVyeVNlbGVjdG9yKCcuY2xvc2VBZnRlclhTZWNvbmRzJyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihtdXRhdGlvbnMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcnVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgbGV0IHRpbWVvdXRJZDtcclxuICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2gobXV0YXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50Q2xvc2VQb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikgJiYgcnVuID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudENsb3NlUG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRDbG9zZVBvcHVwLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW4gPT0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbmZpZy5zZWNvbmRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIFxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudENsb3NlUG9wdXAsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xvc2VBZnRlclhTZWNvbmRzOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCBjbG9zZUFmdGVyWFNlY29uZHMgZnJvbSBcIi4vb3B0aW9ucy9jbG9zZUFmdGVyWFNlY29uZHMuanNcIjtcclxuaW1wb3J0IGNsb3NlQ2xpY2tCdXR0b24gZnJvbSBcIi4vb3B0aW9ucy9jbG9zZUNsaWNrQnV0dG9uLmpzXCI7XHJcbmltcG9ydCBjbG9zZUNsaWNrT3V0c2lkZSBmcm9tIFwiLi9vcHRpb25zL2Nsb3NlQ2xpY2tPdXRzaWRlLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBjbG9zZUFmdGVyWFNlY29uZHMsXHJcbiAgICBjbG9zZUNsaWNrQnV0dG9uLFxyXG4gICAgY2xvc2VDbGlja091dHNpZGUsXHJcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBjbG9zZUNsaWNrQnV0dG9uID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZUtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudEJUTkNsb3NlUG9wdXAgPSBlS2V5UG9wdXAucXVlcnlTZWxlY3RvcignLmJ0bkNsb3NlUG9wdXAnKTtcclxuICAgICAgICBlbGVtZW50QlROQ2xvc2VQb3B1cC5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50UG9wdXAgPSBlS2V5UG9wdXAucXVlcnlTZWxlY3RvcignLmNsb3NlQ2xpY2tCdXR0b24nKTtcclxuICAgICAgICAgICAgZWxlbWVudFBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xvc2VDbGlja0J1dHRvbjsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IGNsb3NlQ2xpY2tPdXRzaWRlID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmKGNvbmZpZy5lbmFibGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRDbG9zZUNsaWNrT3V0c2lkZVBhcmVudChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgLy8gVMOsbSBwaOG6p24gdOG7rSBjaGEgY+G7p2EgZWxlbWVudFxyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgIT09IGRvY3VtZW50LmJvZHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE7hur91IHBo4bqnbiB04butIGNoYSBjw7MgY2jhu6lhIGNsYXNzIGNsb3NlQ2xpY2tPdXRzaWRlIHRow6wgbmfhu6tuZyBs4bqhaVxyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJjbG9zZUNsaWNrT3V0c2lkZVwiKSB8fCBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlUG9wdXBcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIE7hur91IG7hu5VpIGLhu410IHJhIMSR4bq/biBib2R5IHRow6wgbmfhu6tuZyBs4bqhaVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2xvc2VDbGlja091dHNpZGVcIik7XHJcbiAgICAgICAgZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCwga2V5KSA9PiB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZS50YXJnZXQgIT0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5wb3B1cFRlc3RcIiArIChrZXkrMSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZpbmRDbG9zZUNsaWNrT3V0c2lkZVBhcmVudChlKSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihmaW5kQ2xvc2VDbGlja091dHNpZGVQYXJlbnQoZSkgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsb3NlQ2xpY2tPdXRzaWRlOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuY2xhc3MgY29yZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSB1c2VyY29uZmlnO1xyXG4gICAgfVxyXG5cclxuICAgIHJlYWRDb25maWcgKGNvbmZpZywgbWV0aG9kcywgcmVnaXN0ZXIsIGtleVBvcHVwKSB7XHJcbiAgICAgICAgdmFyIGNoZWNrZWQgPSBmYWxzZTtcclxuICAgICAgICBtZXRob2RzLmZvckVhY2goKG1ldGhvZCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnW21ldGhvZF0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlID0gcmVnaXN0ZXJbbWV0aG9kXShjb25maWdbbWV0aG9kXSwga2V5UG9wdXApO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY2hlY2tlZDtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvcmU7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgcmVnaXN0ZXIgZnJvbSBcIi4vcmVnaXN0ZXIuanNcIjtcclxuaW1wb3J0IGNvcmUgZnJvbSBcIi4uLy4uLy4uL2NvcmUvY29yZS5qc1wiO1xyXG5cclxuY2xhc3MgY2xvc2VQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBrZXlQb3B1cCkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwOyBcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0ICgpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gbmV3IGNvcmUoKTtcclxuICAgICAgICBjb25zdCBtZXRob2RzID0gWydjbG9zZUFmdGVyWFNlY29uZHMnLCAnY2xvc2VDbGlja0J1dHRvbicsICdjbG9zZUNsaWNrT3V0c2lkZSddO1xyXG4gICAgICAgIHByb2Nlc3MucmVhZENvbmZpZyh0aGlzLm9wdGlvbnMsIG1ldGhvZHMsIHJlZ2lzdGVyLCB0aGlzLmtleVBvcHVwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsb3NlUG9wdXA7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IHNjcm9sbFRvWFBlcmNlbnQgZnJvbSBcIi4vb3B0aW9ucy9zY3JvbGxUb1hQZXJjZW50LmpzXCI7XHJcbmltcG9ydCB2aXNpdFdlYkFmdGVyWFNlY29uZHMgZnJvbSBcIi4vb3B0aW9ucy92aXNpdFdlYkFmdGVyWFNlY29uZHMuanNcIjtcclxuaW1wb3J0IG9uQ2xpY2tJdGVtIGZyb20gXCIuL29wdGlvbnMvb25DbGlja0l0ZW0uanNcIjtcclxuaW1wb3J0IGFmdGVyVmlld1hQYWdlIGZyb20gXCIuL29wdGlvbnMvYWZ0ZXJWaWV3WFBhZ2UuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHNjcm9sbFRvWFBlcmNlbnQsXHJcbiAgICB2aXNpdFdlYkFmdGVyWFNlY29uZHMsXHJcbiAgICBvbkNsaWNrSXRlbSxcclxuICAgIGFmdGVyVmlld1hQYWdlXHJcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5jb25zdCBzY3JvbGxUb1hQZXJjZW50ID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmICghY29uZmlnLmVuYWJsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsIGFjdGl2ZVNjb2xsUGFnZSk7XHJcblxyXG4gICAgZnVuY3Rpb24gYWN0aXZlU2NvbGxQYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA9IHdpbmRvdy5zY3JvbGxZO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiR2nDoSB0cuG7iyDEkcOjIGN14buZbjogXCIrY3VycmVudFNjcm9sbFBvc2l0aW9uKTtcclxuICAgICAgICBjb25zdCB0b3RhbEhlaWdodE9mUGFnZSA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiQ2hp4buBdSBjYW8gcGFnZTogXCIrdG90YWxIZWlnaHRPZlBhZ2UpO1xyXG5cclxuICAgICAgICBsZXQgY2hlY2tlZFNjcm9sbCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oa2V5UG9wdXApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKChjb25maWcucGVyY2VudCAvIDEwMCkgKiB0b3RhbEhlaWdodE9mUGFnZSk7XHJcblxyXG4gICAgICAgIGlmIChjdXJyZW50U2Nyb2xsUG9zaXRpb24gPj0gKGNvbmZpZy5wZXJjZW50IC8gMTAwKSAqIHRvdGFsSGVpZ2h0T2ZQYWdlICYmIGNoZWNrZWRTY3JvbGwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgZWtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRQb3B1cCA9IGVrZXlQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnNjcm9sbFRvWFBlcmNlbnRcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnRQb3B1cC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleVBvcHVwLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzY3JvbGxUb1hQZXJjZW50O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCB2aXNpdFdlYkFmdGVyWFNlY29uZHMgPSAoY29uZmlnLCBrZXlQb3B1cCkgPT4ge1xyXG4gICAgaWYgKGNvbmZpZy5lbmFibGUgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGVrZXlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2tleVBvcHVwfWApO1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRTaG93WFNlY29uZHMgPSBla2V5UG9wdXAucXVlcnlTZWxlY3RvcignLnZpc2l0V2ViQWZ0ZXJYU2Vjb25kcycpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50U2hvd1hTZWNvbmRzLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfSwgY29uZmlnLnNlY29uZHMpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB2aXNpdFdlYkFmdGVyWFNlY29uZHM7XHJcblxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmNvbnN0IG9uQ2xpY2tJdGVtID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGtleVBvcHVwKTtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09IHRydWUpIHtcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuYnRuJHtrZXlQb3B1cH1gKS5vbmNsaWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50T25DbGlja0l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtrZXlQb3B1cH1gKTtcclxuICAgICAgICAgICAgY29uc3Qgb25DbGlja1Nob3dQb3B1cCA9ICBlbGVtZW50T25DbGlja0l0ZW0ucXVlcnlTZWxlY3RvcignLm9uQ2xpY2tJdGVtJyk7XHJcbiAgICAgICAgICAgIG9uQ2xpY2tTaG93UG9wdXAuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG9uQ2xpY2tJdGVtOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuXHJcbmNvbnN0IGFmdGVyVmlld1hQYWdlID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09IHRydWUpIHtcclxuICAgICAgICB2YXIgcGFnZVZpZXdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oYCR7a2V5UG9wdXB9YCk7XHJcblxyXG4gICAgICAgIGlmIChwYWdlVmlld3MgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwYWdlVmlld3MgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYWdlVmlld3MrKztcclxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgJHtrZXlQb3B1cH1gLCBwYWdlVmlld3MpO1xyXG4gICAgICAgIGlmIChwYWdlVmlld3MgPT09IGNvbmZpZy5OdW1QYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVrZXlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2tleVBvcHVwfWApO1xyXG4gICAgICAgICAgICBjb25zdCBlbGVtZW50Vmlld1hQYWdlID0gZWtleVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5hZnRlclZpZXdYUGFnZScpO1xyXG4gICAgICAgICAgICBlbGVtZW50Vmlld1hQYWdlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYWZ0ZXJWaWV3WFBhZ2U7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IHJlZ2lzdGVyIGZyb20gXCIuL3JlZ2lzdGVyLmpzXCI7XHJcbmltcG9ydCBjb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlL2NvcmUuanNcIjtcclxuXHJcbmNsYXNzIG9wZW4ge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywga2V5UG9wdXApIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMua2V5UG9wdXAgPSBrZXlQb3B1cDsgXHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCAoKSB7XHJcbiAgICAgICAgdGhpcy5pc09wZW5Qb3B1cCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzT3BlblBvcHVwICgpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gbmV3IGNvcmUoKTtcclxuICAgICAgICBjb25zdCBtZXRob2RzID0gWydzY3JvbGxUb1hQZXJjZW50JywgJ3Zpc2l0V2ViQWZ0ZXJYU2Vjb25kcycsICdvbkNsaWNrSXRlbScsICdhZnRlclZpZXdYUGFnZSddO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvY2Vzcy5yZWFkQ29uZmlnKHRoaXMub3B0aW9ucywgbWV0aG9kcywgcmVnaXN0ZXIsIHRoaXMua2V5UG9wdXApO1xyXG4gICAgfVxyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG9wZW47IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgY2xvc2VQb3B1cCBmcm9tIFwiLi9jbG9zZS9jbG9zZS5qc1wiO1xyXG5pbXBvcnQgb3BlbiBmcm9tIFwiLi9vcGVuL29wZW4uanNcIjtcclxuXHJcbmNsYXNzIGJlaGF2aW91cnMge1xyXG4gICAgY29uc3RydWN0b3IgKGJlaGFDb25maWcsIGtleVBvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25PcGVuID0gYmVoYUNvbmZpZy5vcGVuO1xyXG4gICAgICAgIHRoaXMub3B0aW9uQ2xvc2UgPSBiZWhhQ29uZmlnLmNsb3NlO1xyXG4gICAgICAgIHRoaXMua2V5UG9wdXAgPSBrZXlQb3B1cDtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCAoKSB7XHJcbiAgICAgICAgbmV3IG9wZW4odGhpcy5vcHRpb25PcGVuLCB0aGlzLmtleVBvcHVwKTtcclxuICAgICAgICBuZXcgY2xvc2VQb3B1cCh0aGlzLm9wdGlvbkNsb3NlLCB0aGlzLmtleVBvcHVwKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGJlaGF2aW91cnM7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IGV4aXN0Q2xhc3MgZnJvbSBcIi4vb3B0aW9ucy9leGlzdENsYXNzLmpzXCI7XHJcbmltcG9ydCBleGlzdENvb2tpZSBmcm9tIFwiLi9vcHRpb25zL2V4aXN0Q29va2llLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBleGlzdENsYXNzLFxyXG4gICAgZXhpc3RDb29raWVcclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGV4aXN0Q2xhc3MgPSAoY29uZmlnKSA9PiB7XHJcbiAgICBpZiAoY29uZmlnLmVuYWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrQ2xhc3MgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygnc2Fhcy1wb3B1cCcpO1xyXG4gICAgICAgIHJldHVybiBjaGVja0NsYXNzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBleGlzdENsYXNzOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGV4aXN0Q29va2llID0gKGNvbmZpZykgPT4ge1xyXG4gICAgaWYgKGNvbmZpZy5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICBjb25zdCBnZXRDb29raWUgPSAoY25hbWUpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5hbWUgPSBjbmFtZSArIFwiPVwiO1xyXG4gICAgICAgICAgICBsZXQgZGVjb2RlZENvb2tpZSA9IGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUpO1xyXG4gICAgICAgICAgICBsZXQgY2EgPSBkZWNvZGVkQ29va2llLnNwbGl0KCc7Jyk7XHJcbiAgICAgICAgICAgIGxldCBsZW4gPSBjYS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjID0gY2FbaV07XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCkgPT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lKSA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjLnN1YnN0cmluZyhuYW1lLmxlbmd0aCwgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjaGVja0Nvb2tpZSA9ICgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0Q29va2llKCdzYWFzLXBvcHVwJyk7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSAxKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjaGVja0Nvb2tpZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBleGlzdENvb2tpZTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQgcmVnaXN0ZXIgZnJvbSBcIi4vcmVnaXN0ZXIuanNcIjtcclxuaW1wb3J0IGNvcmUgZnJvbSBcIi4uLy4uL2NvcmUvY29yZS5qc1wiO1xyXG5cclxuY2xhc3MgY29uZGl0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOyBcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0ICgpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzID0gbmV3IGNvcmUoKTtcclxuICAgICAgICBjb25zdCBtZXRob2RzID0gWydleGlzdENsYXNzJywgJ2V4aXN0Q29va2llJ107XHJcbiAgICAgICAgcHJvY2Vzcy5yZWFkQ29uZmlnKHRoaXMub3B0aW9ucywgbWV0aG9kcywgcmVnaXN0ZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0YXR1cyAoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IG5ldyBjb3JlKCk7XHJcbiAgICAgICAgY29uc3QgbWV0aG9kcyA9IFsnZXhpc3RDbGFzcycsICdleGlzdENvb2tpZSddO1xyXG4gICAgICAgIHJldHVybiBwcm9jZXNzLnJlYWRDb25maWcodGhpcy5vcHRpb25zLCBtZXRob2RzLCByZWdpc3Rlcik7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjb25kaXRpb247IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuaW1wb3J0IHBvc2l0aW9uUG9wdXAgZnJvbSBcIi4vY29tcG9uZW50cy9wb3NpdGlvbi5qc1wiO1xyXG5pbXBvcnQgb3ZlcmxheVBvcHVwIGZyb20gXCIuL2NvbXBvbmVudHMvb3ZlcmxheS5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgcG9zaXRpb25Qb3B1cCxcclxuICAgIG92ZXJsYXlQb3B1cFxyXG59XHJcblxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBwb3NpdGlvblBvcHVwID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGNvbmZpZylcclxuXHJcbiAgICBpZiAoY29uZmlnLndpZHRoICE9IG51bGwgJiYgY29uZmlnLmhlaWdodCAhPSBudWxsKSB7XHJcbiAgICAgICAgdmFyIGJyb3dzZXJXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuICAgICAgICB2YXIgYnJvd3NlckhlaWdodCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgdmFyIHBvcHVwV2lkdGggPSBjb25maWcud2lkdGg7XHJcbiAgICAgICAgdmFyIHBvcHVwSGVpZ2h0ID0gY29uZmlnLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGJyb3dzZXJXaWR0aCA8PSAzNjApIHtcclxuICAgICAgICAgICAgcG9wdXBXaWR0aCAqPSAwLjQ7XHJcbiAgICAgICAgICAgIHBvcHVwSGVpZ2h0ICo9IDAuNDtcclxuICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXJXaWR0aCA8PSA0ODApIHtcclxuICAgICAgICAgICAgcG9wdXBXaWR0aCAqPSAwLjU7XHJcbiAgICAgICAgICAgIHBvcHVwSGVpZ2h0ICo9IDAuNTtcclxuICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXJXaWR0aCA8PSA2NDApIHtcclxuICAgICAgICAgICAgcG9wdXBXaWR0aCAqPSAwLjc7XHJcbiAgICAgICAgICAgIHBvcHVwSGVpZ2h0ICo9IDAuNztcclxuICAgICAgICB9IGVsc2UgaWYgKGJyb3dzZXJXaWR0aCA8PSA3NjgpIHtcclxuICAgICAgICAgICAgcG9wdXBXaWR0aCAqPSAwLjg7XHJcbiAgICAgICAgICAgIHBvcHVwSGVpZ2h0ICo9IDAuODtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBmcmFtZVdpZHRoID0gYnJvd3NlcldpZHRoIC0gcG9wdXBXaWR0aDtcclxuICAgICAgICB2YXIgZnJhbWVIZWlnaHQgPSBicm93c2VySGVpZ2h0IC0gcG9wdXBIZWlnaHQ7XHJcblxyXG4gICAgICAgIHZhciByYXRpb1dpZHRoID0gKGZyYW1lV2lkdGggLyBicm93c2VyV2lkdGgpICogMTAwO1xyXG4gICAgICAgIHZhciByYXRpb0hlaWdodCA9IChmcmFtZUhlaWdodCAvIGJyb3dzZXJIZWlnaHQpICogMTAwO1xyXG5cclxuICAgICAgICB2YXIgbW92ZURpc3RhbmNlQnlCcm93c2VyV2lkdGggPSBicm93c2VyV2lkdGggKiAoY29uZmlnLnggLyAxMDApO1xyXG4gICAgICAgIHZhciBtb3ZlRGlzdGFuY2VCeUJyb3dzZXJIZWlnaHQgPSBicm93c2VySGVpZ2h0ICogKGNvbmZpZy55IC8gMTAwKTtcclxuXHJcbiAgICAgICAgdmFyIG1vdmVEaXN0YW5jZUJ5RnJhbWVXaWR0aCA9IG1vdmVEaXN0YW5jZUJ5QnJvd3NlcldpZHRoICogKHJhdGlvV2lkdGggLyAxMDApO1xyXG4gICAgICAgIHZhciBtb3ZlRGlzdGFuY2VCeUZyYW1lSGVpZ2h0ID0gbW92ZURpc3RhbmNlQnlCcm93c2VySGVpZ2h0ICogKHJhdGlvSGVpZ2h0IC8gMTAwKTtcclxuXHJcblxyXG4gICAgICAgIC8vIEzhuqV5IHJhIGVsZW1lbnQgYuG7jWMgcG9wdXBcclxuICAgICAgICBjb25zdCBlS2V5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtrZXlQb3B1cH1gKTtcclxuICAgICAgICBsZXQgcG9wdXBFbGVtZW50ID0gZUtleVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3NpdGlvblBvcHVwJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocG9wdXBFbGVtZW50KTtcclxuXHJcbiAgICAgICAgcG9wdXBFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIiwgYCR7cG9wdXBXaWR0aH1weGAsIFwiaW1wb3J0YW50XCIpO1xyXG4gICAgICAgIHBvcHVwRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImhlaWdodFwiLCBgJHtwb3B1cEhlaWdodH1weGAsIFwiaW1wb3J0YW50XCIpO1xyXG5cclxuICAgICAgICBwb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJsZWZ0XCIsIGAke21vdmVEaXN0YW5jZUJ5RnJhbWVXaWR0aH1weGAsIFwiaW1wb3J0YW50XCIpO1xyXG4gICAgICAgIHBvcHVwRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcInRvcFwiLCBgJHttb3ZlRGlzdGFuY2VCeUZyYW1lSGVpZ2h0fXB4YCwgXCJpbXBvcnRhbnRcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBwb3NpdGlvblBvcHVwO1xyXG5cclxuLy8gTOG6pXkgxJHGsOG7o2MgY2hp4buBdSBkw6BpICwgcuG7mW5nIGPhu6dhIHRyw6xuaCBkdXnhu4d0XHJcbi8vIEzhuqV5IGNoaeG7gXUgZMOgaSwgcuG7mW5nIGPhu6dhIHBvcHVwXHJcbi8vIEzhuqV5IGNoaeG7gXUgZMOgaSwgcuG7mW5nIGPhu6dhIGtodW5nIHRyb25nID0gdHLDrG5oIGR1eeG7h3QgLSBwb3B1cFxyXG4vLyBUw61uaCDEkcaw4bujYyB04bu3IGzhu4cgxJHhu5kgbOG7m24gY+G7p2EgY2hp4buBdSBkw6BpIGtodW5nIHNvIHbhu5tpIGNoaeG7gXUgZMOgaSB0csOsbmggZHV54buHdFxyXG4vLyBUw61uaCDEkcaw4bujYyB04bu3IGzhu4cgxJHhu5kgbOG7m24gY+G7p2EgY2hp4buBdSBy4buZbmcga2h1bmcgc28gduG7m2kgY2hp4buBdSBy4buZbmcgdHLDrG5oIGR1eeG7h3RcclxuXHJcbi8vIHRyw6xuaCBkdXnhu4d0OiB4OjEwMDBweCwgeTo4MDBweFxyXG4vLyBwb3B1cDogeDo0NTBweCwgeTozMDBweFxyXG4vLyBraHVuZzogeDo1NTBweCwgeTo1MDBweFxyXG4vLyB04bu3IGzhu4cga2h1bmcgc28gduG7m2kgdHLDrG5oIGR1eeG7h3Q6IHg6NTUlLCB5OjYyLDUlXHJcblxyXG4vLyB2ZDogTmfGsOG7nWkgZHVuZyBzZXQgKDUwJSwgNTAlKVxyXG4vLyBUw61uaCDEkcaw4bujYyBxdeG6o25nIMSRxrDhu51uZyBk4buLY2ggY2h1eeG7g24gdGhlbyB0csOsbmggZHV54buHdCBsw6A6IHg6NTAwcHgsIHk6NDAwcHhcclxuLy8gcXXhuqNuZyDEkcaw4budbmcgZOG7i2NoIGNodXnhu4NuIHRo4buxYyB04bq/IGPhu6dhIHBvcHVwIHRoZW8ga2h1bmcgbMOgOiB4OiAyNzVweCwgeToyNTBweFxyXG5cclxuLy8gWCA9IDI1JTogMjUlIGPhu6dhIGtob+G6o25nIGPDoWNoIHThu5FpIMSRYSBi4bqhbiBjw7MgdGjhu4MgZOG7i2NoIGNodXnhu4NuIHBvcHVwIHRoZW8gdHLhu6VjIFgiLCIndXNlIHN0cmljdCc7XHJcblxyXG5mdW5jdGlvbiBvdmVybGF5UG9wdXAoY29uZmlnLCBrZXlQb3B1cCkge1xyXG4gIGNvbnNvbGUubG9nKGNvbmZpZylcclxuICBpZiAoY29uZmlnLmVuYWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgbGV0IG9wZW4gPSBmYWxzZTtcclxuICAgIGNvbnN0IGVLZXlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2tleVBvcHVwfWApO1xyXG4gICAgY29uc3QgZWxlbWVudE92ZXJsYXlQb3B1cCA9IGVLZXlQb3B1cC5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheVBvcHVwJyk7XHJcbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcclxuICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcbiAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgaWYgKGVsZW1lbnRPdmVybGF5UG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpICYmIG9wZW4gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIGxldCBvdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheVwiKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcbiAgICAgICAgICAgIG9wZW4gPSB0cnVlO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghZWxlbWVudE92ZXJsYXlQb3B1cC5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgbGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbiAgICAgICAgICAgIG92ZXJsYXkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5yZW1vdmVDaGlsZChvdmVybGF5KSA6IFwiXCI7XHJcbiAgICAgICAgICAgIG9wZW4gPSBmYWxzZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZShlbGVtZW50T3ZlcmxheVBvcHVwLCB7XHJcbiAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuZXhwb3J0IGRlZmF1bHQgb3ZlcmxheVBvcHVwOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IHJlZ2lzdGVyIGZyb20gXCIuL3JlZ2lzdGVyLmpzXCI7XHJcbmltcG9ydCBjb3JlIGZyb20gXCIuLi8uLi9jb3JlL2NvcmUuanNcIjtcclxuXHJcbmNsYXNzIGRlc2lnblBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGtleVBvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsgXHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQgKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSBuZXcgY29yZSgpO1xyXG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbJ292ZXJsYXlQb3B1cCcsICdwb3NpdGlvblBvcHVwJ107XHJcblxyXG4gICAgICAgIHByb2Nlc3MucmVhZENvbmZpZyh0aGlzLm9wdGlvbnMsIG1ldGhvZHMsIHJlZ2lzdGVyLCB0aGlzLmtleVBvcHVwKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRlc2lnblBvcHVwOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCBtb3ZlRnJvbVRvcCBmcm9tICcuL29wdGlvbnMvbW92ZUZyb21Ub3AuanMnO1xyXG5pbXBvcnQgaG9yaXpvbnRhbE1vdmUgZnJvbSAnLi9vcHRpb25zL2hvcml6b250YWxNb3ZlLmpzJztcclxuaW1wb3J0IHpvb21JbiBmcm9tICcuL29wdGlvbnMvem9vbUluLmpzJztcclxuaW1wb3J0IGZhZGVJbiBmcm9tICcuL29wdGlvbnMvZmFkZUluLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIG1vdmVGcm9tVG9wLFxyXG4gICAgaG9yaXpvbnRhbE1vdmUsXHJcbiAgICB6b29tSW4sXHJcbiAgICBmYWRlSW5cclxufSIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IG1vdmVGcm9tVG9wID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZWFzaW5nID0gY29uZmlnLmVhc2luZztcclxuICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgbW92aW5nTGVuZ3RoID0gc2NyZWVuSGVpZ2h0Kihjb25maWcubW92aW5nTGVuZ3RoLzEwMCk7XHJcbiAgICAgICAgY29uc3QgZWtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgY29uc3QgcG9wdXBFbGVtZW50ID0gZWtleVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlRnJvbVRvcCcpO1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xyXG4gICAgICAgICAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSBcImF0dHJpYnV0ZXNcIiAmJiBtdXRhdGlvbi5hdHRyaWJ1dGVOYW1lID09PSBcImNsYXNzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9wdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3B1cFNsaWRpbmcgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoLSR7bW92aW5nTGVuZ3RofXB4KWAsIG9wYWNpdHk6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInRyYW5zbGF0ZVkoMHB4KVwiLCBvcGFjaXR5OiAxIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1pbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogY29uZmlnLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlcmF0aW9uczogMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBFbGVtZW50LmFuaW1hdGUocG9wdXBTbGlkaW5nLCB0aW1pbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICAvLyBvYnNlcnZlci5vYnNlcnZlKHBvcHVwRWxlbWVudCwge1xyXG4gICAgICAgIC8vICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG1vdmVGcm9tVG9wOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IGhvcml6b250YWxNb3ZlID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZWFzaW5nID0gY29uZmlnLmVhc2luZztcclxuICAgICAgICBjb25zdCBzY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIGNvbnN0IG1vdmluZ0xlbmd0aCA9IGNvbmZpZy5tb3ZpbmdGcm9tLnRvTG93ZXJDYXNlKCkgPT0gJ2xlZnQnID8gLShzY3JlZW5XaWR0aCooY29uZmlnLm1vdmluZ0xlbmd0aC8xMDApKSA6IChzY3JlZW5XaWR0aCooY29uZmlnLm1vdmluZ0xlbmd0aC8xMDApKTtcclxuICAgICAgICBjb25zdCBla2V5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtrZXlQb3B1cH1gKTtcclxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSBla2V5UG9wdXAucXVlcnlTZWxlY3RvcignLmhvcml6b250YWxNb3ZlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwU2xpZGluZyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWCgke21vdmluZ0xlbmd0aH1weClgLCBvcGFjaXR5OiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVYKDBweClcIiwgb3BhY2l0eTogMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGNvbmZpZy5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwRWxlbWVudC5hbmltYXRlKHBvcHVwU2xpZGluZywgdGltaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9wb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIGBibG9ja2AsIFwiaW1wb3J0YW50XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBvcHVwRWxlbWVudCwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBob3Jpem9udGFsTW92ZTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCB6b29tSW4gPSAoY29uZmlnLCBrZXlQb3B1cCkgPT4ge1xyXG4gICAgaWYgKGNvbmZpZy5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICBjb25zdCBlYXNpbmcgPSBjb25maWcuZWFzaW5nO1xyXG4gICAgICAgIGNvbnN0IGVrZXlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2tleVBvcHVwfWApO1xyXG4gICAgICAgIGNvbnN0IHBvcHVwRWxlbWVudCA9IGVrZXlQb3B1cC5xdWVyeVNlbGVjdG9yKCcuem9vbUluJyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwWm9vbUluID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IGBzY2FsZSgke2NvbmZpZy5mcm9tUGVyY2VudC8xMDB9KWAsIG9wYWNpdHk6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgdHJhbnNmb3JtOiBcInNjYWxlKDEpXCIsIG9wYWNpdHk6IDEgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWluZyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjb25maWcuZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBlYXNpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVsZW1lbnQuYW5pbWF0ZShwb3B1cFpvb21JbiwgdGltaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBvcHVwRWxlbWVudCwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB6b29tSW47IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgZmFkZUluID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09IHRydWUpIHtcclxuICAgICAgICBjb25zdCBlYXNpbmcgPSBjb25maWcuZWFzaW5nO1xyXG4gICAgICAgIGNvbnN0IGVrZXlQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2tleVBvcHVwfWApO1xyXG4gICAgICAgIGNvbnN0IHBvcHVwRWxlbWVudCA9IGVrZXlQb3B1cC5xdWVyeVNlbGVjdG9yKCcuZmFkZUluJyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwWm9vbUluID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAwIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IG9wYWNpdHk6IDEgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IGNvbmZpZy5kdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwRWxlbWVudC5hbmltYXRlKHBvcHVwWm9vbUluLCB0aW1pbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZhZGVJbjsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCByZWdpc3RlciBmcm9tIFwiLi9yZWdpc3Rlci5qc1wiO1xyXG5pbXBvcnQgY29yZSBmcm9tIFwiLi4vLi4vLi4vY29yZS9jb3JlLmpzXCI7XHJcblxyXG5jbGFzcyBhcHBlYXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGtleVBvcHVwKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsgXHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwOyBcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBpc0VuYWJsZUFuaW1hdGlvbnMgKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZW5hYmxlQW5pbWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQgKCkge1xyXG4gICAgICAgIGlmKHRoaXMuaXNFbmFibGVBbmltYXRpb25zKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5pc09wZW5Qb3B1cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc09wZW5Qb3B1cCAoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2VzcyA9IG5ldyBjb3JlKCk7XHJcbiAgICAgICAgY29uc3QgbWV0aG9kcyA9IFsnbW92ZUZyb21Ub3AnLCAnaG9yaXpvbnRhbE1vdmUnLCAnem9vbUluJywgJ2ZhZGVJbiddO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBwcm9jZXNzLnJlYWRDb25maWcodGhpcy5vcHRpb25zLCBtZXRob2RzLCByZWdpc3RlciwgdGhpcy5rZXlQb3B1cCk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXBwZWFyOyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCB6b29tT3V0IGZyb20gJy4vb3B0aW9ucy96b29tT3V0LmpzJztcclxuaW1wb3J0IGZhZGVPdXQgZnJvbSAnLi9vcHRpb25zL2ZhZGVPdXQuanMnO1xyXG5pbXBvcnQgbW92ZVRvVG9wIGZyb20gJy4vb3B0aW9ucy9tb3ZlVG9Ub3AuanMnO1xyXG5pbXBvcnQgaG9yaXpvbnRhbE1vdmUgZnJvbSAnLi9vcHRpb25zL2hvcml6b250YWxNb3ZlLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHtcclxuICAgIHpvb21PdXQsXHJcbiAgICBmYWRlT3V0LFxyXG4gICAgbW92ZVRvVG9wLFxyXG4gICAgaG9yaXpvbnRhbE1vdmUsXHJcbn0iLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCB6b29tT3V0ID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZWFzaW5nID0gY29uZmlnLmVhc2luZztcclxuICAgICAgICBjb25zdCBla2V5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtrZXlQb3B1cH1gKTtcclxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSBla2V5UG9wdXAucXVlcnlTZWxlY3RvcignLnpvb21PdXQnKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJhdHRyaWJ1dGVzXCIgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gXCJjbGFzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgXCJibG9ja1wiLCBcImltcG9ydGFudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9wdXBab29tT3V0ID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogJ3NjYWxlKDEpJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogJ3NjYWxlKDApJyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogY29uZmlnLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb24gPSBwb3B1cEVsZW1lbnQuYW5pbWF0ZShwb3B1cFpvb21PdXQsIHRpbWluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLm9uZmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gd2FpdCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbGF0ID0gYXdhaXQgQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmxhdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHpvb21PdXQ7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgZmFkZU91dCA9IChjb25maWcsIGtleVBvcHVwKSA9PiB7XHJcbiAgICBpZiAoY29uZmlnLmVuYWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgIGNvbnN0IGVhc2luZyA9IGNvbmZpZy5lYXNpbmc7XHJcbiAgICAgICAgY29uc3QgZWtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgY29uc3QgcG9wdXBFbGVtZW50ID0gZWtleVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mYWRlT3V0Jyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIiwgXCJpbXBvcnRhbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwRmFkZU91dCA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBvcGFjaXR5OiAxIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgb3BhY2l0eTogMCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltaW5nID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogY29uZmlnLmR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVyYXRpb25zOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbmltYXRpb24gPSBwb3B1cEVsZW1lbnQuYW5pbWF0ZShwb3B1cEZhZGVPdXQsIHRpbWluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uLm9uZmluaXNoID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMgZnVuY3Rpb24gd2FpdCgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbGF0ID0gYXdhaXQgQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmxhdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FpdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZhZGVPdXQ7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgbW92ZVRvVG9wID0gKGNvbmZpZywga2V5UG9wdXApID0+IHtcclxuICAgIGlmIChjb25maWcuZW5hYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgY29uc3QgZWFzaW5nID0gY29uZmlnLmVhc2luZztcclxuICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgY29uc3QgbW92aW5nTGVuZ3RoID0gc2NyZWVuSGVpZ2h0Kihjb25maWcubW92aW5nTGVuZ3RoLzEwMCk7XHJcbiAgICAgICAgY29uc3QgZWtleVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7a2V5UG9wdXB9YCk7XHJcbiAgICAgICAgY29uc3QgcG9wdXBFbGVtZW50ID0gZWtleVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlVG9Ub3AnKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcclxuICAgICAgICAgICAgbXV0YXRpb25zLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gXCJhdHRyaWJ1dGVzXCIgJiYgbXV0YXRpb24uYXR0cmlidXRlTmFtZSA9PT0gXCJjbGFzc1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwRWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgXCJibG9ja1wiLCBcImltcG9ydGFudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQW5pbWF0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9wdXBTbGlkaW5nID0gW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogXCJ0cmFuc2xhdGVZKDBweClcIiwgb3BhY2l0eTogMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoLSR7bW92aW5nTGVuZ3RofXB4KWAsIG9wYWNpdHk6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1pbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjb25maWcuZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHBvcHVwRWxlbWVudC5hbmltYXRlKHBvcHVwU2xpZGluZywgdGltaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24ub25maW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiB3YWl0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsYXQgPSBhd2FpdCBBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbGF0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHBvcHVwRWxlbWVudCwge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBtb3ZlVG9Ub3A7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgaG9yaXpvbnRhbE1vdmUgPSAoY29uZmlnLCBrZXlQb3B1cCkgPT4ge1xyXG4gICAgaWYgKGNvbmZpZy5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICBjb25zdCBlYXNpbmcgPSBjb25maWcuZWFzaW5nO1xyXG4gICAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcbiAgICAgICAgY29uc3QgbW92aW5nTGVuZ3RoID0gY29uZmlnLm1vdmluZ1RvLnRvTG93ZXJDYXNlKCkgPT0gJ2xlZnQnID8gLShzY3JlZW5XaWR0aCooY29uZmlnLm1vdmluZ0xlbmd0aC8xMDApKSA6IChzY3JlZW5XaWR0aCooY29uZmlnLm1vdmluZ0xlbmd0aC8xMDApKTtcclxuICAgICAgICBjb25zdCBla2V5UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtrZXlQb3B1cH1gKTtcclxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSBla2V5UG9wdXAucXVlcnlTZWxlY3RvcignLmhvcml6b250YWxNb3ZlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uLnR5cGUgPT09IFwiYXR0cmlidXRlc1wiICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09IFwiY2xhc3NcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIiwgXCJpbXBvcnRhbnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIEFuaW1hdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvcHVwU2xpZGluZyA9IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IFwidHJhbnNsYXRlWCgwcHgpXCIsIG9wYWNpdHk6IDEgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0cmFuc2Zvcm06IGB0cmFuc2xhdGVYKCR7bW92aW5nTGVuZ3RofXB4KWAsIG9wYWNpdHk6IDAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aW1pbmcgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBjb25maWcuZHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZXJhdGlvbnM6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFuaW1hdGlvbiA9IHBvcHVwRWxlbWVudC5hbmltYXRlKHBvcHVwU2xpZGluZywgdGltaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb24ub25maW5pc2ggPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3luYyBmdW5jdGlvbiB3YWl0KCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsYXQgPSBhd2FpdCBBbmltYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbGF0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1cEVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWl0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUocG9wdXBFbGVtZW50LCB7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGhvcml6b250YWxNb3ZlOyIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuaW1wb3J0IHJlZ2lzdGVyIGZyb20gXCIuL3JlZ2lzdGVyLmpzXCI7XHJcbmltcG9ydCBjb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlL2NvcmUuanNcIjtcclxuXHJcbmNsYXNzIGRpc2FwcGVhciB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBrZXlQb3B1cCkge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlzRGlzbmFibGVBbmltYXRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZW5hYmxlQW5pbWF0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQgKCkge1xyXG4gICAgICAgIGlmKHRoaXMuaXNEaXNuYWJsZUFuaW1hdGlvbnMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlzQ2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpc0Nsb3NlUG9wdXAgKCkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3MgPSBuZXcgY29yZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IG1ldGhvZHMgPSBbJ3pvb21PdXQnLCAnZmFkZU91dCcsICdtb3ZlVG9Ub3AnLCAnaG9yaXpvbnRhbE1vdmUnXTtcclxuICAgICAgICBwcm9jZXNzLnJlYWRDb25maWcodGhpcy5vcHRpb25zLCBtZXRob2RzLCByZWdpc3RlciwgdGhpcy5rZXlQb3B1cCk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCBkaXNhcHBlYXI7IiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgYXBwZWFyIGZyb20gXCIuL2FwcGVhci9hcHBlYXIuanNcIjtcclxuaW1wb3J0IGRpc2FwcGVhciBmcm9tIFwiLi9kaXNhcHBlYXIvZGlzYXBwZWFyLmpzXCI7XHJcblxyXG5jbGFzcyBhbmltYXRpb25zIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvciAoYmVoYUNvbmZpZywga2V5UG9wdXApIHtcclxuICAgICAgICB0aGlzLm9wdGlvbkFwcGVhciA9IGJlaGFDb25maWcuYXBwZWFyO1xyXG4gICAgICAgIHRoaXMub3B0aW9uRGlzQXBwZWFyID0gYmVoYUNvbmZpZy5kaXNhcHBlYXI7XHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpbml0ICgpIHtcclxuICAgICAgICBuZXcgYXBwZWFyKHRoaXMub3B0aW9uQXBwZWFyLCB0aGlzLmtleVBvcHVwKTtcclxuICAgICAgICBuZXcgZGlzYXBwZWFyKHRoaXMub3B0aW9uRGlzQXBwZWFyLCB0aGlzLmtleVBvcHVwKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFuaW1hdGlvbnM7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY2xhc3MgUmVuZGVyUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IgKGNsYXNzTmFtZSwgaHRtbCwgaWRQb3B1cCwgY2xhc3NMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5jbGFzc05hbWUgPSBjbGFzc05hbWU7XHJcbiAgICAgICAgdGhpcy5odG1sID0gaHRtbDtcclxuICAgICAgICB0aGlzLmlkUG9wdXAgPSBpZFBvcHVwO1xyXG4gICAgICAgIHRoaXMuY2xhc3NMaXN0ID0gY2xhc3NMaXN0XHJcbiAgICB9XHJcblxyXG4gICAgaW5uZXJQb3B1cCAoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcG9wdXAgPSAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwb3B1cC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgYG5vbmVgKTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgZmVhdHVyZSBvZiB0aGlzLmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICBwb3B1cC5jbGFzc0xpc3QuYWRkKGZlYXR1cmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcG9wdXAuaW5uZXJIVE1MID0gdGhpcy5odG1sO1xyXG4gICAgICAgIHBvcHVwLnN0eWxlLnNldFByb3BlcnR5KFwicG9zaXRpb25cIiwgYGZpeGVkYCwgXCJpbXBvcnRhbnRcIik7XHJcblxyXG4gICAgICAgIGNvbnN0IGVsZW1lbnRJRFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5pZFBvcHVwfWApO1xyXG4gICAgICAgIGVsZW1lbnRJRFBvcHVwLmFwcGVuZENoaWxkKHBvcHVwKTtcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFJlbmRlclBvcHVwOyAiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbmltcG9ydCBiZWhhdmlvcnMgZnJvbSBcIi4uL21vZHVsZXMvYmVoYXZpb3JzL2JlaGF2aW9ycy5qc1wiO1xyXG5pbXBvcnQgY29uZGl0aW9uIGZyb20gXCIuLi9tb2R1bGVzL2NvbmRpdGlvbnMvY29uZGl0aW9uLmpzXCI7XHJcbmltcG9ydCBkZXNpZ25Qb3B1cCBmcm9tIFwiLi4vbW9kdWxlcy9kZXNpZ25zL2Rlc2lnbi5qc1wiO1xyXG5pbXBvcnQgYW5pbWF0aW9ucyBmcm9tIFwiLi4vbW9kdWxlcy9hbmltYXRpb25zL2FuaW1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgUmVuZGVyUG9wdXAgZnJvbSBcIi4vcmVuZGVyLmpzXCI7XHJcbmltcG9ydCBodG1sUG9wdXAgZnJvbSBcIi4vZXhhbS5qc1wiO1xyXG5cclxuY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IodXNlcmNvbmZpZywga2V5UG9wdXApIHtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IHVzZXJjb25maWc7XHJcbiAgICAgICAgdGhpcy5rZXlQb3B1cCA9IGtleVBvcHVwO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFN0eWxlQ1NTKCkge1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhlYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaW5rJyk7XHJcblxyXG4gICAgICAgICAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcclxuICAgICAgICAgICAgbGluay5ocmVmID0gXCJodHRwczovL3BoYW1odW5neHVhbnNhbmcuZ2l0aHViLmlvL1BvcHVwLUxvL3NyYy9jb3JlL2NvcmUuY3NzXCI7XHJcblxyXG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbmRLZXlzV2l0aEVuYWJsZVRydWUob2JqKSB7XHJcbiAgICAgICAgY29uc3QgdHJ1ZUtleXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW2tleV0gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJLZXlzID0gdGhpcy5maW5kS2V5c1dpdGhFbmFibGVUcnVlKG9ialtrZXldKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdWJLZXlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnVlS2V5cy5wdXNoKC4uLnN1YktleXMubWFwKHN1YktleSA9PiBgJHtrZXl9LiR7c3ViS2V5fWApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdlbmFibGUnICYmIG9ialtrZXldID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnVlS2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cnVlS2V5cztcclxuICAgIH1cclxuXHJcbiAgICBzcGxpdFN0cmluZ1RvQXJyYXkoc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zcGxpdCgnLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpbHRlckVuYWJsZWRFbGVtZW50cyhhcnJheSkge1xyXG4gICAgICAgIHJldHVybiBhcnJheS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSAnZW5hYmxlJyk7XHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICBmdW5jdGlvblBvcHVwRW5hYmxlZCA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCB0cnVlS2V5cyA9IHRoaXMuZmluZEtleXNXaXRoRW5hYmxlVHJ1ZSh0aGlzLmNvbmZpZyk7XHJcbiAgICAgICAgdmFyIHRlbXAgPSBbJ3Bvc2l0aW9uUG9wdXAnXTtcclxuICAgICAgICB0cnVlS2V5cy5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5ld0tleSA9IHRoaXMuZmlsdGVyRW5hYmxlZEVsZW1lbnRzKHRoaXMuc3BsaXRTdHJpbmdUb0FycmF5KGtleSkpO1xyXG4gICAgICAgICAgICBsZXQgbGVuID0gbmV3S2V5Lmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKGxlbiA+IDApXHJcbiAgICAgICAgICAgICAgICB0ZW1wLnB1c2gobmV3S2V5W2xlbiAtIDFdKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB0ZW1wO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3coKSB7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyID0gbmV3IFJlbmRlclBvcHVwKFwibXktcG9wdXBcIiwgaHRtbFBvcHVwLCB0aGlzLmtleVBvcHVwLCB0aGlzLmZ1bmN0aW9uUG9wdXBFbmFibGVkKCkpO1xyXG4gICAgICAgIHJlbmRlci5pbm5lclBvcHVwKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IENvbmRpdGlvbnMgPSBuZXcgY29uZGl0aW9uKHRoaXMuY29uZmlnLmNvbmRpdGlvbik7XHJcbiAgICAgICAgQ29uZGl0aW9ucy5nZXRTdGF0dXMoKTtcclxuICAgICAgICBpZihDb25kaXRpb25zLmdldFN0YXR1cygpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5ndW5nXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoQ29uZGl0aW9ucy5nZXRTdGF0dXMoKSA9PT0gdHJ1ZSAmJiB0aGlzLmNvbmZpZy5lbmFibGUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgbmV3IGFuaW1hdGlvbnModGhpcy5jb25maWcuYW5pbWF0aW9ucywgdGhpcy5rZXlQb3B1cCk7XHJcbiAgICAgICAgICAgIG5ldyBiZWhhdmlvcnModGhpcy5jb25maWcuYmVoYXZpb3JzLCB0aGlzLmtleVBvcHVwKTtcclxuICAgICAgICAgICAgbmV3IGRlc2lnblBvcHVwKHRoaXMuY29uZmlnLmRlc2lnbiwgdGhpcy5rZXlQb3B1cCk7XHJcbiAgICAgICAgfSBcclxuICAgIH1cclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImNvbnN0IGh0bWxQb3B1cCA9IGBcclxuPGRpdiBjbGFzcz1cInBvcHVwXCI+XHJcbjxkaXYgY2xhc3M9XCJpbWctd3JhcHBlclwiPjxpbWcgc3JjPVwiaHR0cHM6Ly9wbmcucG5ndHJlZS5jb20vdGh1bWJfYmFjay9mdzgwMC9iYWNrZ3JvdW5kLzIwMjIxMTE2L3BuZ3RyZWUtaXNvbGF0ZWQtd2hpdGUtYmFja2dyb3VuZC13aXRoLWEtdmVydGljYWwtcmVkLWdpZnQtYm93LXBob3RvLWltYWdlXzY3NzgxNy5qcGdcIiBhbHQ9XCJBbmhcIj48L2Rpdj5cclxuPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cclxuICAgIDxwIGNsYXNzPVwicG9wdXAtaGVhZGluZ1wiPlNhdmUgdXAgdG88L3A+XHJcbiAgICA8aDEgY2xhc3M9XCJwb3B1cC1vZmZlclwiPjMwJSBPRkY8L2gxPlxyXG4gICAgPHAgY2xhc3M9XCJwb3B1cC1kZXNjXCI+SW4geW91ciBuZXh0IGhvbGlkYXkgb2ZmZXI8L3A+XHJcblxyXG4gICAgPGZvcm0gYWN0aW9uPVwiUE9TVFwiIGNsYXNzPVwicG9wdXAtZm9ybVwiPlxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cImVtYWlsXCIgdHlwZT1cImVtYWlsXCIgcGxhY2Vob2xkZXI9XCJQbGVhc2UgZW50ZXIgeW91ciBlbWFpbFwiPlxyXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cInN1Ym1pdFwiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIkdldCBpdCBub3dcIj5cclxuICAgIDwvZm9ybT5cclxuXHJcbiAgICA8YnV0dG9uIGNsYXNzPVwicmVmdXNlIGJ0bkNsb3NlUG9wdXBcIj5ObywgdGhhbmtzPC9idXR0b24+XHJcbjwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGh0bWxQb3B1cDsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZWFkQ29uZmlnKGxpc3RDb25maWcpIHtcclxuICAgIGxpc3RDb25maWcuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmIChlbGVtZW50LmVuYWJsZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ215LXBvcHVwJywgZWxlbWVudC5mdW5jdGlvbk5hbWUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBuZXdQb3B1cCA9IG5ldyBQb3B1cChlbGVtZW50LCBlbGVtZW50LmZ1bmN0aW9uTmFtZSk7XHJcbiAgICAgICAgICAgIG5ld1BvcHVwLmFkZFN0eWxlQ1NTKCk7XHJcbiAgICAgICAgICAgIG5ld1BvcHVwLnNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmNvbnN0IGNvbmZpZzEgPSB7XHJcbiAgICBlbmFibGU6IHRydWUsXHJcbiAgICBmdW5jdGlvbk5hbWU6IFwicG9wdXBUZXN0MVwiLFxyXG4gICAgbmFtZVBvcHVwOiBcIlRlc3Qtc2Fhcy1wb3B1cFwiLFxyXG4gICAgY29uZGl0aW9uOiB7XHJcbiAgICAgICAgZXhpc3RDbGFzczoge1xyXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBleGlzdENvb2tpZToge1xyXG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBiZWhhdmlvcnM6IHtcclxuICAgICAgICBvcGVuOiB7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvWFBlcmNlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBlcmNlbnQ6IDUwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB2aXNpdFdlYkFmdGVyWFNlY29uZHM6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAzMDAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkNsaWNrSXRlbToge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJWaWV3WFBhZ2U6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBOdW1QYWdlOiAzLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbG9zZToge1xyXG4gICAgICAgICAgICBjbG9zZUFmdGVyWFNlY29uZHM6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAzMDAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZUNsaWNrQnV0dG9uOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlQ2xpY2tPdXRzaWRlOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlc2lnbjoge1xyXG4gICAgICAgIHBvc2l0aW9uUG9wdXA6IHtcclxuICAgICAgICAgICAgd2lkdGg6IDUwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgICAgIHg6IDUwLFxyXG4gICAgICAgICAgICB5OiA1MCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIG92ZXJsYXlQb3B1cDoge1xyXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBhbmltYXRpb25zOiB7XHJcbiAgICAgICAgYXBwZWFyOiB7XHJcbiAgICAgICAgICAgIGVuYWJsZUFuaW1hdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgbW92ZUZyb21Ub3A6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2UtaW5cIixcclxuICAgICAgICAgICAgICAgIG1vdmluZ0xlbmd0aDogMTAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBob3Jpem9udGFsTW92ZToge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZS1pblwiLFxyXG4gICAgICAgICAgICAgICAgbW92aW5nRnJvbTogJ3JpZ2h0JyxcclxuICAgICAgICAgICAgICAgIG1vdmluZ0xlbmd0aDogMTAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHpvb21Jbjoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJsaW5lYXJcIixcclxuICAgICAgICAgICAgICAgIGZyb21QZXJjZW50OiA4MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmFkZUluOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlLWluXCIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGRpc2FwcGVhcjoge1xyXG4gICAgICAgICAgICBlbmFibGVBbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIHpvb21PdXQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2Utb3V0XCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhZGVPdXQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiA1MDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZS1vdXRcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbW92ZVRvVG9wOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlLW91dFwiLFxyXG4gICAgICAgICAgICAgICAgbW92aW5nTGVuZ3RoOiA1MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaG9yaXpvbnRhbE1vdmU6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2Utb3V0XCIsXHJcbiAgICAgICAgICAgICAgICBtb3ZpbmdUbzogJ3JpZ2h0JyxcclxuICAgICAgICAgICAgICAgIG1vdmluZ0xlbmd0aDogMjAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IGNvbmZpZzIgPSB7XHJcbiAgICBlbmFibGU6IHRydWUsXHJcbiAgICBmdW5jdGlvbk5hbWU6IFwicG9wdXBUZXN0MlwiLFxyXG4gICAgbmFtZVBvcHVwOiBcIlRlc3Qtc2Fhcy1wb3B1cFwiLFxyXG4gICAgY29uZGl0aW9uOiB7XHJcbiAgICAgICAgZXhpc3RDbGFzczoge1xyXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBleGlzdENvb2tpZToge1xyXG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBiZWhhdmlvcnM6IHtcclxuICAgICAgICBvcGVuOiB7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvWFBlcmNlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBwZXJjZW50OiA1MCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdmlzaXRXZWJBZnRlclhTZWNvbmRzOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2Vjb25kczogMzAwMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25DbGlja0l0ZW06IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYWZ0ZXJWaWV3WFBhZ2U6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBOdW1QYWdlOiAzLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbG9zZToge1xyXG4gICAgICAgICAgICBjbG9zZUFmdGVyWFNlY29uZHM6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzZWNvbmRzOiAzMDAwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZUNsaWNrQnV0dG9uOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlQ2xpY2tPdXRzaWRlOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGRlc2lnbjoge1xyXG4gICAgICAgIHBvc2l0aW9uUG9wdXA6IHtcclxuICAgICAgICAgICAgd2lkdGg6IDMwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiA0MDAsXHJcbiAgICAgICAgICAgIHg6IDEwMCxcclxuICAgICAgICAgICAgeTogNTAsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvdmVybGF5UG9wdXA6IHtcclxuICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgYW5pbWF0aW9uczoge1xyXG4gICAgICAgIGFwcGVhcjoge1xyXG4gICAgICAgICAgICBlbmFibGVBbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIG1vdmVGcm9tVG9wOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlLWluXCIsXHJcbiAgICAgICAgICAgICAgICBtb3ZpbmdMZW5ndGg6IDEwMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaG9yaXpvbnRhbE1vdmU6IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2UtaW5cIixcclxuICAgICAgICAgICAgICAgIG1vdmluZ0Zyb206ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICBtb3ZpbmdMZW5ndGg6IDEwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB6b29tSW46IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwibGluZWFyXCIsXHJcbiAgICAgICAgICAgICAgICBmcm9tUGVyY2VudDogODAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZhZGVJbjoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZS1pblwiLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkaXNhcHBlYXI6IHtcclxuICAgICAgICAgICAgZW5hYmxlQW5pbWF0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICB6b29tT3V0OiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDIwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlLW91dFwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWRlT3V0OiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNTAwLFxyXG4gICAgICAgICAgICAgICAgZWFzaW5nOiBcImVhc2Utb3V0XCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1vdmVUb1RvcDoge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXHJcbiAgICAgICAgICAgICAgICBlYXNpbmc6IFwiZWFzZS1vdXRcIixcclxuICAgICAgICAgICAgICAgIG1vdmluZ0xlbmd0aDogNTAsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGhvcml6b250YWxNb3ZlOiB7XHJcbiAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDQwMCxcclxuICAgICAgICAgICAgICAgIGVhc2luZzogXCJlYXNlLW91dFwiLFxyXG4gICAgICAgICAgICAgICAgbW92aW5nVG86ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICBtb3ZpbmdMZW5ndGg6IDIwLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbn07XHJcblxyXG5yZWFkQ29uZmlnKFtjb25maWcxLCBjb25maWcyXSk7Il0sIm5hbWVzIjpbImNsb3NlQWZ0ZXJYU2Vjb25kcyIsImNvbmZpZyIsImtleVBvcHVwIiwiZW5hYmxlIiwiZWxlbWVudENsb3NlUG9wdXAiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwidGltZW91dElkIiwiZm9yRWFjaCIsIm11dGF0aW9uIiwidHlwZSIsImF0dHJpYnV0ZU5hbWUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNldFRpbWVvdXQiLCJyZW1vdmUiLCJzdHlsZSIsInNldFByb3BlcnR5Iiwic2Vjb25kcyIsImNsZWFyVGltZW91dCIsIm9ic2VydmUiLCJhdHRyaWJ1dGVzIiwiY2xvc2VDbGlja0J1dHRvbiIsImVLZXlQb3B1cCIsIm9uY2xpY2siLCJjbG9zZUNsaWNrT3V0c2lkZSIsImZpbmRDbG9zZUNsaWNrT3V0c2lkZVBhcmVudCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwicGFyZW50IiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImJvZHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZWxlbWVudCIsImtleSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY29uc3RydWN0b3IiLCJ1c2VyY29uZmlnIiwidGhpcyIsInJlYWRDb25maWciLCJtZXRob2RzIiwicmVnaXN0ZXIiLCJjaGVja2VkIiwibWV0aG9kIiwidW5kZWZpbmVkIiwib3B0aW9ucyIsImluaXQiLCJzY3JvbGxUb1hQZXJjZW50Iiwid2luZG93IiwiY3VycmVudFNjcm9sbFBvc2l0aW9uIiwic2Nyb2xsWSIsImNvbnNvbGUiLCJsb2ciLCJ0b3RhbEhlaWdodE9mUGFnZSIsInNjcm9sbEhlaWdodCIsImlubmVySGVpZ2h0IiwiY2hlY2tlZFNjcm9sbCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsInBlcmNlbnQiLCJhZGQiLCJzZXRJdGVtIiwidmlzaXRXZWJBZnRlclhTZWNvbmRzIiwiZWxlbWVudFNob3dYU2Vjb25kcyIsIm9uQ2xpY2tJdGVtIiwiYWZ0ZXJWaWV3WFBhZ2UiLCJwYWdlVmlld3MiLCJsb2NhbFN0b3JhZ2UiLCJOdW1QYWdlIiwiaXNPcGVuUG9wdXAiLCJiZWhhQ29uZmlnIiwib3B0aW9uT3BlbiIsIm9wZW4iLCJvcHRpb25DbG9zZSIsImNsb3NlIiwiZXhpc3RDbGFzcyIsImV4aXN0Q29va2llIiwiY25hbWUiLCJuYW1lIiwiY2EiLCJkZWNvZGVVUklDb21wb25lbnQiLCJjb29raWUiLCJzcGxpdCIsImxlbiIsImxlbmd0aCIsImkiLCJjIiwiY2hhckF0Iiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsImdldENvb2tpZSIsImdldFN0YXR1cyIsInBvc2l0aW9uUG9wdXAiLCJ3aWR0aCIsImhlaWdodCIsImJyb3dzZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwiYnJvd3NlckhlaWdodCIsImNsaWVudEhlaWdodCIsInBvcHVwV2lkdGgiLCJwb3B1cEhlaWdodCIsInJhdGlvV2lkdGgiLCJyYXRpb0hlaWdodCIsIm1vdmVEaXN0YW5jZUJ5RnJhbWVXaWR0aCIsIngiLCJtb3ZlRGlzdGFuY2VCeUZyYW1lSGVpZ2h0IiwieSIsInBvcHVwRWxlbWVudCIsIm92ZXJsYXlQb3B1cCIsImVsZW1lbnRPdmVybGF5UG9wdXAiLCJvdmVybGF5IiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJtb3ZlRnJvbVRvcCIsImVhc2luZyIsIm1vdmluZ0xlbmd0aCIsInBvcHVwU2xpZGluZyIsInRyYW5zZm9ybSIsIm9wYWNpdHkiLCJ0aW1pbmciLCJkdXJhdGlvbiIsIml0ZXJhdGlvbnMiLCJhbmltYXRlIiwiaG9yaXpvbnRhbE1vdmUiLCJzY3JlZW5XaWR0aCIsImlubmVyV2lkdGgiLCJtb3ZpbmdGcm9tIiwidG9Mb3dlckNhc2UiLCJ6b29tSW4iLCJwb3B1cFpvb21JbiIsImZyb21QZXJjZW50IiwiZmFkZUluIiwiaXNFbmFibGVBbmltYXRpb25zIiwiZW5hYmxlQW5pbWF0aW9uIiwiem9vbU91dCIsImFzeW5jIiwid2FpdCIsIlByb21pc2UiLCJyZXNvbHZlIiwib25maW5pc2giLCJmYWRlT3V0IiwibW92ZVRvVG9wIiwibW92aW5nVG8iLCJpc0Rpc25hYmxlQW5pbWF0aW9ucyIsImlzQ2xvc2VQb3B1cCIsIm9wdGlvbkFwcGVhciIsImFwcGVhciIsIm9wdGlvbkRpc0FwcGVhciIsImRpc2FwcGVhciIsImNsYXNzTmFtZSIsImh0bWwiLCJpZFBvcHVwIiwiaW5uZXJQb3B1cCIsInBvcHVwIiwiZmVhdHVyZSIsImlubmVySFRNTCIsImFkZFN0eWxlQ1NTIiwiaGVhZCIsImxpbmsiLCJyZWwiLCJocmVmIiwiZmluZEtleXNXaXRoRW5hYmxlVHJ1ZSIsIm9iaiIsInRydWVLZXlzIiwic3ViS2V5cyIsInB1c2giLCJtYXAiLCJzdWJLZXkiLCJzcGxpdFN0cmluZ1RvQXJyYXkiLCJzdHJpbmciLCJmaWx0ZXJFbmFibGVkRWxlbWVudHMiLCJhcnJheSIsImZpbHRlciIsIml0ZW0iLCJmdW5jdGlvblBvcHVwRW5hYmxlZCIsInRlbXAiLCJuZXdLZXkiLCJzaG93IiwiQ29uZGl0aW9ucyIsImNvbmRpdGlvbiIsImFuaW1hdGlvbiIsImFuaW1hdGlvbnMiLCJiZWhhdmlvcnMiLCJkZXNpZ24iLCJmdW5jdGlvbk5hbWUiLCJuYW1lUG9wdXAiLCJlbCIsIm5ld1BvcHVwIl0sInNvdXJjZVJvb3QiOiIifQ==